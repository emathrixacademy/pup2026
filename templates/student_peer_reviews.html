{% extends 'base.html' %}

{% block title %}Peer Reviews - Sangrenes LMS{% endblock %}

{% block content %}
<div class="page-header">
    <h1><i class="fas fa-user-friends"></i> My Peer Reviews</h1>
    <a href="{{ url_for('student_dashboard') }}" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Dashboard</a>
</div>

{% if pending_reviews %}
<div class="card">
    <div class="card-header">
        <span class="card-title"><i class="fas fa-clock"></i> Pending Reviews ({{ pending_reviews|length }})</span>
    </div>
    <div class="card-body">
        {% for review in pending_reviews %}
        <div class="review-item pending">
            <div class="review-info">
                <h4>{{ review.activity_title }}</h4>
                <p class="text-muted">{{ review.subject_name }} - {{ review.session_title }}</p>
                <small>Assigned: {{ review.assigned_at }}</small>
            </div>
            <a href="{{ url_for('do_peer_review', assignment_id=review.id) }}" class="btn">
                <i class="fas fa-edit"></i> Review Now
            </a>
        </div>
        {% endfor %}
    </div>
</div>
{% else %}
<div class="card">
    <div class="card-header">
        <span class="card-title"><i class="fas fa-clock"></i> Pending Reviews</span>
    </div>
    <div class="card-body">
        <div class="empty-state">
            <i class="fas fa-check-circle"></i>
            <p>No pending peer reviews!</p>
        </div>
    </div>
</div>
{% endif %}

<div class="card mt-20">
    <div class="card-header">
        <span class="card-title"><i class="fas fa-check-double"></i> Completed Reviews ({{ completed_reviews|length }})</span>
    </div>
    <div class="card-body">
        {% if completed_reviews %}
        {% for review in completed_reviews %}
        <div class="review-item completed">
            <div class="review-info">
                <h4>{{ review.activity_title }}</h4>
                <p class="text-muted">{{ review.subject_name }} - {{ review.session_title }}</p>
                <small>Completed: {{ review.completed_at }}</small>
            </div>
            <span class="badge badge-success"><i class="fas fa-check"></i> Completed</span>
        </div>
        {% endfor %}
        {% else %}
        <div class="empty-state">
            <i class="fas fa-clipboard-list"></i>
            <p>No completed reviews yet</p>
        </div>
        {% endif %}
    </div>
</div>

<style>
.review-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    border: 1px solid #eee;
    border-radius: 8px;
    margin-bottom: 10px;
    background: #fff;
}
.review-item.pending {
    border-left: 4px solid #f59e0b;
}
.review-item.completed {
    border-left: 4px solid #10b981;
    opacity: 0.8;
}
.review-info h4 {
    margin: 0 0 5px 0;
    color: #1e293b;
}
.review-info p {
    margin: 0;
    font-size: 14px;
}
.empty-state {
    text-align: center;
    padding: 40px;
    color: #666;
}
.empty-state i {
    font-size: 48px;
    margin-bottom: 15px;
    color: #10b981;
}
.badge-success {
    background: #10b981;
    color: white;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 12px;
}
</style>
{% endblock %}
