{% extends 'base.html' %}
{% block title %}Grades - eMathrix LMS{% endblock %}
{% block content %}
<h1 style="font-size:1.2rem;font-weight:700;margin:0 0 16px;"><i class="fas fa-chart-line" style="color:#10B981;"></i> Grades Overview</h1>

<div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:14px;margin-bottom:24px;">
    {% set colors = ['#6366F1','#10B981','#8B5CF6','#F59E0B','#EF4444','#3B82F6'] %}
    {% for s in subjects %}
    <div style="background:var(--card);border:1px solid var(--border);border-radius:12px;padding:20px;">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;">
            <div style="width:40px;height:40px;background:{{ colors[loop.index0 % 6] }}22;color:{{ colors[loop.index0 % 6] }};border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:0.85rem;">{{ s.code[:3] }}</div>
            <div>
                <div style="font-size:0.9rem;font-weight:700;">{{ s.code }} - {{ s.section }}</div>
                <div style="font-size:0.72rem;color:var(--muted);">{{ s.name }}</div>
            </div>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;">
            <div style="font-size:0.78rem;color:var(--muted);"><i class="fas fa-users"></i> {{ s.enrolled }} students &middot; {{ s.instructor_name or 'No teacher' }}</div>
        </div>
    </div>
    {% endfor %}
</div>

{% if top_students %}
<div style="background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden;">
    <div style="padding:14px 18px;border-bottom:1px solid var(--border);">
        <h3 style="margin:0;font-size:0.9rem;font-weight:600;"><i class="fas fa-trophy" style="color:#F59E0B;"></i> Top Performers</h3>
    </div>
    <div style="overflow-x:auto;">
        <table style="width:100%;border-collapse:collapse;">
            <tbody>
            {% for s in top_students %}
            <tr style="border-bottom:1px solid #F1F5F9;">
                <td style="padding:10px 14px;font-size:0.85rem;font-weight:600;">{{ s.name }}</td>
                <td style="padding:10px 14px;text-align:center;font-size:0.82rem;color:var(--muted);">{{ s.subject }}</td>
                <td style="padding:10px 14px;text-align:center;font-size:0.92rem;font-weight:700;color:#10B981;">{{ "%.0f"|format(s.grade) }}%</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}
{% endblock %}
